<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Arquitectura - MussikOn</title>
  <link rel="stylesheet" href="../css/modern.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    /* Estilos adicionales especÃ­ficos si se requieren */
    .quick-link-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: var(--glass);
      backdrop-filter: var(--glass-blur);
      border-radius: 18px;
      box-shadow: var(--card-shadow);
      padding: 22px 0 14px 0;
      min-width: 120px;
      font-size: 1.5em;
      font-weight: 600;
      color: var(--primary);
      text-decoration: none;
      transition: background 0.18s, color 0.18s, transform 0.18s;
      border: 2px solid transparent;
      margin-bottom: 0;
      position: relative;
      width: 100%;
      max-width: 220px;
      box-sizing: border-box;
    }
    .quick-link-card span {
      font-size: 1.02em;
      font-weight: 500;
      margin-top: 8px;
      color: var(--text);
    }
    .quick-link-card:hover, .quick-link-card:focus {
      background: var(--primary-gradient);
      color: #fff;
      transform: translateY(-4px) scale(1.04);
      border: 2px solid var(--accent);
    }
    .quick-link-card:hover span, .quick-link-card:focus span {
      color: #fff;
    }
    .quick-link-card.alt {
      background: rgba(0,229,255,0.10);
      color: var(--primary);
    }
    .quick-link-card.alt:hover, .quick-link-card.alt:focus {
      background: linear-gradient(135deg, #00e5ff 0%, #1565c0 100%);
      color: #fff;
    }
    .quick-link-desc {
      display: block;
      font-size: 0.92em;
      color: #3a5069;
      margin-top: 6px;
      font-weight: 400;
      opacity: 0.85;
      text-align: center;
      line-height: 1.2;
    }
    .quick-link-card:hover .quick-link-desc, .quick-link-card:focus .quick-link-desc {
      color: #fff;
      opacity: 1;
    }
    .glass-card {
      background: var(--glass);
      backdrop-filter: var(--glass-blur);
      border-radius: var(--border-radius);
      box-shadow: var(--card-shadow);
      padding: 24px 14px;
      margin: 24px auto;
      max-width: 900px;
      position: relative;
      animation: fadeInUp 0.7s cubic-bezier(.23,1.01,.32,1) both;
      box-sizing: border-box;
    }
    .glass-card h2, .glass-card h3, .glass-card h4 {
      color: var(--primary);
      margin-top: 0;
      font-size: 1.3em;
    }
    .glass-card ul {
      list-style: none;
      padding-left: 0;
    }
    .glass-card ul li {
      margin-bottom: 10px;
      position: relative;
      padding-left: 28px;
    }
    .glass-card ul li:before {
      content: '\2714';
      color: var(--accent);
      position: absolute;
      left: 0;
      font-size: 1.1em;
      top: 2px;
    }
    @media (max-width: 900px) {
      .glass-card {
        padding: 18px 6vw;
        margin: 18px 0;
        max-width: 98vw;
      }
      .hero-modern h1 {
        font-size: 2em;
      }
      .quick-link-card {
        font-size: 1.15em;
        min-width: 100px;
        max-width: 100%;
      }
    }
    @media (max-width: 600px) {
      .glass-card {
        padding: 12px 2vw;
        margin: 12px 0;
      }
      .hero-modern h1 {
        font-size: 1.2em;
      }
      .quick-link-card {
        font-size: 1em;
        padding: 16px 0 10px 0;
      }
      .quick-link-card span {
        font-size: 0.98em;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="logo">
        <a href="../index.html"> <img class="img-logo" src="../assets/Logo_Letter.png" alt=""></a>
      </div>
      <button class="mobile-menu-button" aria-label="Abrir menÃº" onclick="toggleMobileMenu()"><i class="fas fa-bars"></i></button>
      <nav>
        <ul>
          <li><a href="../index.html#inicio">Inicio</a></li>
          <li><a href="../index.html#app">La App</a></li>
          <li><a href="../index.html#docs">DocumentaciÃ³n</a></li>
          <li><a href="../index.html#devs">Desarrolladores</a></li>
          <li><a href="../index.html#contact">Contacto</a></li>
        </ul>
      </nav>
    </div>
  </header>
  <section class="hero-modern">
    <div class="icon"><i class="fas fa-cubes"></i></div>
    <h1>Arquitectura MussikOn</h1>
    <p>Clean Architecture & DDD para apps mÃ³viles modernas.<br>Escalable, mantenible y lista para el futuro.</p>
    <div class="glass-card" style="margin:36px auto 0 auto; max-width:1000px;">
      <h4 style="margin-bottom:18px;">ğŸ” Accesos RÃ¡pidos</h4>
      <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(140px,1fr)); gap:14px; justify-items:center;">
        <a href="#vision" class="quick-link-card">ğŸ”­<span>VisiÃ³n</span><small class="quick-link-desc">Resumen y propÃ³sito de la arquitectura</small></a>
        <a href="#patron" class="quick-link-card alt">ğŸ—ï¸<span>PatrÃ³n</span><small class="quick-link-desc">Clean Architecture y capas</small></a>
        <a href="#carpetas" class="quick-link-card">ğŸ“<span>Estructura</span><small class="quick-link-desc">OrganizaciÃ³n de carpetas y archivos</small></a>
        <a href="#flujos" class="quick-link-card alt">ğŸ”„<span>Flujos</span><small class="quick-link-desc">Flujo de datos y procesos clave</small></a>
        <a href="#patrones" class="quick-link-card">ğŸ§©<span>Patrones</span><small class="quick-link-desc">Patrones de diseÃ±o implementados</small></a>
        <a href="#estado" class="quick-link-card alt">ğŸ“¦<span>Estado</span><small class="quick-link-desc">GestiÃ³n de estado y slices</small></a>
        <a href="#api" class="quick-link-card">ğŸ”Œ<span>APIs</span><small class="quick-link-desc">IntegraciÃ³n de servicios y sockets</small></a>
        <a href="#i18n" class="quick-link-card alt">ğŸŒ<span>i18n</span><small class="quick-link-desc">InternacionalizaciÃ³n</small></a>
        <a href="#diseÃ±o" class="quick-link-card">ğŸ¨<span>DiseÃ±o</span><small class="quick-link-desc">Sistema de diseÃ±o y temas</small></a>
        <a href="#seguridad" class="quick-link-card alt">ğŸ”<span>Seguridad</span><small class="quick-link-desc">AutenticaciÃ³n y validaciÃ³n</small></a>
        <a href="#navegacion" class="quick-link-card">ğŸ§­<span>NavegaciÃ³n</span><small class="quick-link-desc">Rutas y navegaciÃ³n</small></a>
        <a href="#testing" class="quick-link-card alt">ğŸ§ª<span>Testing</span><small class="quick-link-desc">Estrategia de pruebas</small></a>
        <a href="#performance" class="quick-link-card">âš¡<span>Performance</span><small class="quick-link-desc">OptimizaciÃ³n y mÃ©tricas</small></a>
        <a href="#ciclo" class="quick-link-card alt">ğŸ”<span>Ciclo</span><small class="quick-link-desc">Ciclo de desarrollo y comandos</small></a>
        <a href="#mis-solicitudes" class="quick-link-card">ğŸ“<span>Mis Solicitudes</span><small class="quick-link-desc">Pantalla central y diagrama</small></a>
      </div>
    </div>
  </section>
  <div class="glass-card" id="vision">
    <h2 class="section-title">VisiÃ³n General</h2>
    <p><b>MussikOn</b> sigue una arquitectura modular basada en <b>Clean Architecture</b> y <b>Domain-Driven Design (DDD)</b>, optimizada para aplicaciones mÃ³viles con React Native y Expo. Esta arquitectura estÃ¡ diseÃ±ada para ser escalable, mantenible y fÃ¡cil de entender, separando responsabilidades y permitiendo independencia tecnolÃ³gica.</p>
  </div>
  <div class="glass-card" id="patron">
    <h2 class="section-title">PatrÃ³n ArquitectÃ³nico</h2>
    <pre class="code-block"><code class="language-bash">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Presentation Layer        â”‚ â† React Components, Screens
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Business Logic Layer      â”‚ â† Services, Use Cases
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Data Layer                â”‚ â† APIs, Local Storage
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
    <ul>
      <li><b>SeparaciÃ³n de Responsabilidades:</b> Cada capa tiene una responsabilidad especÃ­fica.</li>
      <li><b>Dependencias Unidireccionales:</b> Las dependencias fluyen hacia adentro (de UI a lÃ³gica, de lÃ³gica a datos).</li>
      <li><b>Independencia de Frameworks:</b> La lÃ³gica de negocio es independiente de React Native.</li>
      <li><b>Testabilidad:</b> Cada capa puede ser testeada independientemente.</li>
    </ul>
  </div>
  <div class="glass-card" id="carpetas">
    <h2 class="section-title">Estructura de Carpetas</h2>
    <pre class="code-block"><code class="language-bash">src/
â”œâ”€â”€ app/                    # Punto de entrada de la aplicaciÃ³n
â”‚   â””â”€â”€ App.tsx           # Componente raÃ­z con configuraciÃ³n global
â”œâ”€â”€ appTypes/              # Definiciones de tipos TypeScript
â”‚   â””â”€â”€ DatasTypes.ts     # Tipos compartidos de la aplicaciÃ³n
â”œâ”€â”€ components/            # Componentes reutilizables
â”‚   â”œâ”€â”€ ui/               # Componentes de interfaz bÃ¡sicos
â”‚   â”œâ”€â”€ features/         # Componentes especÃ­ficos de funcionalidades
â”‚   â”œâ”€â”€ forms/            # Componentes de formularios
â”‚   â””â”€â”€ navigation/       # Componentes de navegaciÃ³n
â”œâ”€â”€ screens/              # Pantallas de la aplicaciÃ³n
â”‚   â”œâ”€â”€ auth/             # Pantallas de autenticaciÃ³n
â”‚   â”œâ”€â”€ dashboard/        # Pantalla principal
â”‚   â”œâ”€â”€ events/           # Pantallas de eventos
â”‚   â”œâ”€â”€ profile/          # Pantallas de perfil
â”‚   â””â”€â”€ settings/         # Pantallas de configuraciÃ³n
â”œâ”€â”€ services/             # Servicios y APIs
â”‚   â”œâ”€â”€ api.ts           # Cliente HTTP configurado
â”‚   â””â”€â”€ events.ts        # Servicios especÃ­ficos de eventos
â”œâ”€â”€ store/                # GestiÃ³n de estado global (Redux)
â”‚   â”œâ”€â”€ store.ts         # ConfiguraciÃ³n del store
â”‚   â””â”€â”€ slices/          # Slices de Redux por dominio
â”œâ”€â”€ hooks/                # Custom hooks
â”‚   â””â”€â”€ useSocket.tsx    # Hook para WebSocket
â”œâ”€â”€ utils/                # Utilidades y helpers
â”‚   â”œâ”€â”€ functions.ts     # Funciones de utilidad
â”‚   â”œâ”€â”€ auth.ts          # Utilidades de autenticaciÃ³n
â”‚   â””â”€â”€ socket.ts        # Utilidades de WebSocket
â”œâ”€â”€ config/               # ConfiguraciÃ³n de la aplicaciÃ³n
â”‚   â””â”€â”€ environment.ts   # Variables de entorno
â”œâ”€â”€ contexts/             # Contextos de React
â”‚   â””â”€â”€ LanguageContext.tsx # Contexto de idioma
â”œâ”€â”€ i18n/                 # InternacionalizaciÃ³n
â”‚   â”œâ”€â”€ index.ts         # ConfiguraciÃ³n de i18next
â”‚   â””â”€â”€ locales/         # Archivos de traducciÃ³n
â”œâ”€â”€ theme/                # Sistema de diseÃ±o
â”‚   â”œâ”€â”€ colors.ts        # Paleta de colores
â”‚   â”œâ”€â”€ typography.ts    # TipografÃ­as
â”‚   â”œâ”€â”€ spacing.ts       # Espaciado
â”‚   â””â”€â”€ theme.ts         # ConfiguraciÃ³n de temas
â”œâ”€â”€ styles/               # Estilos globales
â”‚   â”œâ”€â”€ Styles.ts        # Estilos compartidos
â”‚   â””â”€â”€ media_responsive.ts # Responsive design
â””â”€â”€ navigation/           # ConfiguraciÃ³n de navegaciÃ³n
    â””â”€â”€ index.ts         # ConfiguraciÃ³n de rutas
</code></pre>
  </div>
  <div class="glass-card" id="flujos">
    <h2 class="section-title">Flujo de Datos</h2>
    <ul>
      <li><b>Flujo de AutenticaciÃ³n:</b> Usuario â†’ Login Screen â†’ Auth Service â†’ API â†’ Secure Store â†’ Redux Store â†’ Navigation</li>
      <li><b>Flujo de Eventos:</b> Event Screen â†’ Event Service â†’ API â†’ Redux Store â†’ UI Update</li>
      <li><b>Flujo de Chat en Tiempo Real:</b> Socket Connection â†’ Message Handler â†’ Redux Store â†’ UI Update</li>
    </ul>
  </div>
  <div class="glass-card" id="patrones">
    <h2 class="section-title">Patrones de DiseÃ±o Implementados</h2>
    <ul>
      <li><b>Container/Presentational Pattern:</b> SeparaciÃ³n entre lÃ³gica de datos y presentaciÃ³n visual.</li>
      <li><b>Custom Hooks Pattern:</b> LÃ³gica reutilizable y desacoplada de la UI.</li>
      <li><b>Service Layer Pattern:</b> Servicios centralizados para acceso a datos y lÃ³gica de negocio.</li>
    </ul>
    <h4>Ejemplo de Container/Presentational</h4>
    <pre class="code-block"><code class="language-tsx">// Container Component
const EventListContainer = () => {
  const events = useAppSelector(state => state.events.list);
  const dispatch = useAppDispatch();
  return <EventList events={events} onEventPress={handleEventPress} />;
};
// Presentational Component
const EventList = ({ events, onEventPress }) => (
  <FlatList
    data={events}
    renderItem={({ item }) => <EventCard event={item} onPress={onEventPress} />}
  />
);
</code></pre>
    <h4>Ejemplo de Custom Hook</h4>
    <pre class="code-block"><code class="language-tsx">export const useAuth = () => {
  const { isAuthenticated, user } = useAppSelector(state => state.auth);
  const dispatch = useAppDispatch();
  const login = async (credentials) => { /* lÃ³gica de login */ };
  const logout = () => { dispatch(logout()); };
  return { isAuthenticated, user, login, logout };
};
</code></pre>
    <h4>Ejemplo de Service Layer</h4>
    <pre class="code-block"><code class="language-ts">export const eventService = {
  async getEvents() {
    return apiService.get('/events');
  },
  async createEvent(eventData) {
    return apiService.post('/events', eventData);
  }
};
</code></pre>
  </div>
  <div class="glass-card" id="estado">
    <h2 class="section-title">GestiÃ³n de Estado</h2>
    <ul>
      <li><b>Redux Toolkit:</b> Store centralizado, slices por dominio, DevTools.</li>
      <li><b>Slices implementados:</b> authSlice, themeSlice, languageSlice, notificationsSlice, appSlice, formsSlice.</li>
    </ul>
  </div>
  <div class="glass-card" id="api">
    <h2 class="section-title">IntegraciÃ³n de APIs y WebSocket</h2>
    <ul>
      <li><b>Axios:</b> Cliente HTTP principal, interceptores, reintentos, timeouts.</li>
      <li><b>Socket.io:</b> ComunicaciÃ³n en tiempo real, reconexiÃ³n automÃ¡tica, eventos tipados.</li>
    </ul>
  </div>
  <div class="glass-card" id="i18n">
    <h2 class="section-title">InternacionalizaciÃ³n</h2>
    <ul>
      <li><b>i18next:</b> DetecciÃ³n automÃ¡tica, persistencia, fallbacks, interpolaciÃ³n.</li>
    </ul>
  </div>
  <div class="glass-card" id="diseÃ±o">
    <h2 class="section-title">Sistema de DiseÃ±o</h2>
    <ul>
      <li><b>Design tokens:</b> Colores, tipografÃ­as, espaciado, bordes.</li>
      <li><b>Temas:</b> Claro/oscuro, responsive.</li>
    </ul>
  </div>
  <div class="glass-card" id="seguridad">
    <h2 class="section-title">Seguridad</h2>
    <ul>
      <li><b>JWT, Secure Store, token refresh, logout seguro.</b></li>
      <li><b>ValidaciÃ³n frontend, sanitizaciÃ³n, manejo de errores.</b></li>
    </ul>
  </div>
  <div class="glass-card" id="navegacion">
    <h2 class="section-title">NavegaciÃ³n</h2>
    <ul>
      <li><b>React Navigation:</b> Stack, Tab, Drawer, deep linking.</li>
    </ul>
  </div>
  <div class="glass-card" id="testing">
    <h2 class="section-title">Testing Strategy</h2>
    <ul>
      <li><b>Unit, integration y E2E tests:</b> Jest, React Native Testing Library, Mock Service Worker.</li>
    </ul>
  </div>
  <div class="glass-card" id="performance">
    <h2 class="section-title">Performance</h2>
    <ul>
      <li><b>Lazy loading, memoization, bundle splitting, optimizaciÃ³n de imÃ¡genes.</b></li>
      <li><b>MÃ©tricas:</b> bundle < 50MB, load < 3s, memoria < 200MB, 60 FPS.</li>
    </ul>
  </div>
  <div class="glass-card" id="ciclo">
    <h2 class="section-title">Ciclo de Desarrollo</h2>
    <pre class="code-block"><code class="language-bash">npm start                # Iniciar en modo desarrollo
npm run android          # Ejecutar en Android
npm run ios              # Ejecutar en iOS
npm test                 # Ejecutar tests
eas build --platform android  # Build para Android
eas build --platform ios      # Build para iOS
</code></pre>
  </div>
  <div class="glass-card">
    <h2 class="section-title">Deployment</h2>
    <ul>
      <li><b>EAS Build:</b> Perfiles, CI/CD, OTA updates.</li>
    </ul>
  </div>
  <div class="glass-card" id="mis-solicitudes">
    <h2 class="section-title">Pantalla "Mis Solicitudes" y Arquitectura</h2>
    <p>La pantalla <b>"Mis Solicitudes"</b> es un componente central de la arquitectura moderna de MussikOn. Permite a mÃºsicos y organizadores gestionar todas sus solicitudes/eventos en progreso desde un solo lugar, accesible desde el menÃº lateral.</p>
    <ul>
      <li>Accesible desde el menÃº lateral para ambos roles.</li>
      <li>Usa el componente reutilizable <code>EventList</code> en diferentes modos (pendientes, asignados/agendados, todos).</li>
      <li>Consume los endpoints REST <code>/events/my-pending</code>, <code>/events/my-assigned</code>, <code>/events/my-scheduled</code>, <code>/events/my-events</code>.</li>
      <li>UI moderna con tabs y feedback visual inmediato.</li>
    </ul>
    <h4>Diagrama de NavegaciÃ³n</h4>
    <pre class="code-block"><code class="language-bash">graph TD;
  Sidebar --> MyEventsList;
  MyEventsList --> EventList;
  EventList --> API[API REST /events/*];
  Sidebar --> ShareMusician;
  Sidebar --> EventList;
  Sidebar --> Dashboard;
</code></pre>
  </div>
  <div class="glass-card" style="text-align:center;">
    <h2 class="section-title">Referencias y Enlaces</h2>
    <a href="https://github.com/JefryAstacio/APP_MussikOn_React_Native_Expo" target="_blank" class="btn primary-btn" style="margin:8px 12px;">Repositorio Frontend</a>
    <a href="https://github.com/JefryAstacio/APP_Mussikon_Express" target="_blank" class="btn primary-btn" style="margin:8px 12px;">Repositorio Backend</a>
    <a href="https://github.com/JefryAstacio/Static_Page_MussikOn" target="_blank" class="btn primary-btn" style="margin:8px 12px;">Repositorio PÃ¡gina EstÃ¡tica</a>
    <a href="/api-docs" target="_blank" class="btn secondary-btn" style="margin:8px 12px;">Swagger API Docs</a>
    <p style="margin-top:16px;"><i>Ãšltima actualizaciÃ³n: Diciembre 2024</i></p>
  </div>
  <footer>
    <div class="social-links">
      <a href="https://facebook.com/mussikon" target="_blank"><i class="fab fa-facebook-f"></i></a>
      <a href="https://instagram.com/mussikon" target="_blank"><i class="fab fa-instagram"></i></a>
      <a href="https://youtube.com/mussikon" target="_blank"><i class="fab fa-youtube"></i></a>
    </div>
    <div style="margin-top:12px;">&copy; 2025 MussikOn. Todos los derechos reservados.</div>
  </footer>
  <script>
    function toggleMobileMenu() {
      const navUl = document.querySelector('nav ul');
      navUl.classList.toggle('active');
    }
  </script>
</body>
</html> 